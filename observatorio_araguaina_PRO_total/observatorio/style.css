
:root{--bg:#0f172a;--panel:#111827;--text:#e5e7eb;--muted:#9ca3af;--accent:#60a5fa;--green:#22c55e;--red:#e11d48;--orange:#f97316;--yellow:#eab308;--blue:#3b82f6;--warn:#f59e0b;--danger:#ef4444;}
*{box-sizing:border-box}
body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:var(--bg);color:var(--text)}
#app{display:grid;grid-template-columns:430px 1fr;grid-template-rows:64px 1fr;height:100vh}
header{grid-column:1/3;display:flex;align-items:center;gap:12px;padding:12px 16px;background:var(--panel);border-bottom:1px solid #1f2937}
.brand{font-weight:800}
.spacer{flex:1}
.toggle-group{display:flex;gap:10px;align-items:center;margin-right:10px}
.toggle{display:flex;gap:6px;align-items:center;background:#0b1220;border:1px solid #1f2937;color:#cfe8ff;border-radius:10px;padding:6px 10px}
button.solid{background:var(--accent);border:none;color:#00152b;border-radius:10px;padding:8px 10px;font-weight:700;cursor:pointer}
button.ghost{background:#0b1220;border:1px solid #1f2937;color:#cfe8ff;border-radius:10px;padding:8px 10px;cursor:pointer}
button.danger{background:#2a0d10;border:1px solid #3b0f13;color:#ffb4b4;border-radius:10px;padding:8px 10px;cursor:pointer}

aside{background:var(--panel);border-right:1px solid #1f2937;overflow:auto;padding:14px}
h2{font-size:15px;margin:8px 0 6px}
h3{font-size:14px;margin:8px 0 6px}
.muted{color:var(--muted);font-size:13px}
.card{background:#0b1220;border:1px solid #1f2937;border-radius:12px;padding:12px;margin:10px 0}
.card.small{padding:10px}
.row{display:grid;gap:8px;margin:6px 0}
.row.two{grid-template-columns:1fr 1fr;align-items:center}

.tabs{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:10px}
.tab{flex:1;background:#0b1220;border:1px solid #1f2937;color:#9fb0c3;border-radius:10px;padding:8px;cursor:pointer}
.tab.active{background:#1d253a;border-color:#4a7ed1;color:#cfe8ff}

.legend{background:#0b1220;border:1px solid #1f2937;border-radius:12px;padding:10px;margin:10px 0}
.legend .legend-title{font-size:13px;color:#cfe8ff;margin-bottom:6px}
.legend .chip-row{display:flex;gap:6px;flex-wrap:wrap}
.legend .chip{background:color-mix(in oklab, var(--c) 25%, transparent);border:1px solid color-mix(in oklab, var(--c) 60%, #000);color:#e5f2ff;padding:4px 8px;border-radius:999px;font-size:12px}

.ranking{display:flex;flex-direction:column;gap:6px}
.rank-row{display:flex;align-items:center;gap:8px}
.rank-row .name{flex:0 0 46%;font-size:13px;color:#dbeafe;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.rank-row .bar{flex:1;height:10px;border-radius:999px;background:#0a0f1c;border:1px solid #1f2937;position:relative}
.rank-row .bar::after{content:"";position:absolute;inset:0 100% 0 0;border-radius:999px;background:linear-gradient(90deg,var(--c1),var(--c2))}
.rank-row .val{flex:0 0 52px;text-align:right;font-size:12px;color:#9fb0c3}

#map{height:100%;width:100%}
.leaflet-container{background:#0a0f1c}

footer{position:absolute;right:10px;bottom:10px;background:#0b1220aa;color:#cbd5e1;padding:6px 10px;border-radius:8px;border:1px solid #1f2937;font-size:12px;z-index:999}

.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,.7);z-index:9999;padding:20px}
.modal.open{display:flex}
.modal-content{background:#071126;color:#e6eef8;border-radius:12px;padding:20px 24px;width:min(720px,96%);max-height:80vh;overflow:auto;border:1px solid rgba(255,255,255,.06);position:relative}
.modal-close{position:absolute;right:10px;top:8px;background:transparent;border:none;font-size:22px;color:#9fb0c3;cursor:pointer}
#creditsList{padding-left:16px}
@media (max-width: 1080px){
  #app{grid-template-columns:1fr;grid-template-rows:64px auto 1fr}
  aside{grid-row:2}
  #map{grid-row:3}
}
/* Layout base do ranking (ok manter seu estilo atual) */
.rank-row{
  display:grid;
  grid-template-columns: 1fr auto auto;
  align-items:center;
  gap:8px;
  margin:6px 0;
  font-size:14px;
}

/* Container da barra: neutro */
.rank-row .bar.onlycolor{
  position:relative;
  height:10px;
  background:#1f2937 !important;        /* garante fundo neutro */
  border-radius:999px;
  overflow:hidden;
}

/* Preenchimento colorido */
.rank-row .bar.onlycolor .fill{
  display:block;
  height:100%;
  background: var(--barColor) !important; /* FORÇA a cor do nível */
  border-radius:999px;
  transition: width .35s ease;            /* animação suave opcional */
}

/* Se existir alguma regra antiga que coloque "span" como transparente,
   esta linha abaixo vence pela especificidade */
.rank-row .bar.onlycolor > span.fill{ background: var(--barColor) !important; }

.missing-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  background: #111827; /* fundo escuro bonito */
  border: 1px solid #374151;
  padding: 8px 14px;
  border-radius: 10px;
  font-size: 14px;
  font-weight: 600;
  color: #e5e7eb;
  cursor: pointer;
  transition: 0.25s;
}

.missing-btn:hover {
  background: #1f2937;
  border-color: #4b5563;
}

.missing-icon {
  font-size: 16px;
}

.missing-badge {
  background: #ef4444;
  color: white;
  font-size: 11px;
  font-weight: bold;
  padding: 2px 6px;
  border-radius: 6px;
  display: inline-block;
  min-width: 18px;
  text-align: center;
}

.missing-badge.hidden {
  display: none !important;
}
/* Slot onde a legenda vai ser encaixada em cada aba */
.legend-slot {
  margin-bottom: 14px;
}

/* Cartão da legenda (o #legend-levels do HTML) */
.legend-levels {
  display: none;                 /* o JS liga quando encaixar */
  background: #0f172a;           /* card escuro */
  border: 1px solid #243042;
  border-radius: 12px;
  padding: 10px 12px;
  box-shadow: 0 6px 20px rgba(0,0,0,.25) inset, 0 8px 24px rgba(0,0,0,.18);
}

/* Título da legenda */
.legend-levels .legend-title {
  font-weight: 700;
  font-size: 14px;
  letter-spacing: .3px;
  color: #e5eefc;
  margin-bottom: 8px;
}

/* linha de pílulas */
.legend-levels .legend-pills {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

/* pílulas (cores dos níveis) */
.legend-levels .pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 12.5px;
  padding: 7px 10px;
  border-radius: 999px;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.08);
  color: #e7f1ff;
  user-select: none;
}
.legend-levels .pill::before {
  content: "";
  width: 10px; height: 10px;
  border-radius: 3px;
  display: inline-block;
  box-shadow: 0 0 0 1px rgba(0,0,0,.25);
}

/* cores */
.pill-alta::before         { background: #e11d48; }
.pill-media-alta::before   { background: #f59e0b; }
.pill-media::before        { background: #f97316; }
.pill-media-baixa::before  { background: #eab308; }
.pill-baixa::before        { background: #22c55e; }
.pill-muito-baixa::before  { background: #3b82f6; }


/* ===== Botão "Faltando no mapa" — premium style ===== */
.missing-btn{
  --bg1:#1b2536;          /* topo do gradiente */
  --bg2:#111827;          /* base do gradiente */
  --border:rgba(255,255,255,.08);
  --shadow1:0 6px 14px rgba(0,0,0,.35);
  --shadow2:inset 0 1px 0 rgba(255,255,255,.06);

  position: relative;
  display: inline-flex;
  align-items: center;
  gap: .6rem;

  padding: .62rem .9rem;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: linear-gradient(180deg, var(--bg1), var(--bg2));
  box-shadow: var(--shadow1), var(--shadow2);

  color: #e6eefc;
  font-weight: 600;
  letter-spacing: .2px;
  line-height: 1;
  user-select: none;
  -webkit-tap-highlight-color: transparent;

  transition: transform .12s ease, box-shadow .2s ease, border-color .2s ease, background .25s ease;
}

.missing-btn:hover{
  transform: translateY(-1px);
  box-shadow: 0 10px 22px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.07);
  border-color: rgba(255,255,255,.12);
}

.missing-btn:active{
  transform: translateY(0);
  box-shadow: 0 4px 10px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
}

.missing-btn:focus-visible{
  outline: none;
  box-shadow:
    0 0 0 3px rgba(96,165,250,.25),     /* anel suave */
    0 8px 18px rgba(0,0,0,.5),
    inset 0 1px 0 rgba(255,255,255,.06);
}

/* Ícone à esquerda (pode ser emoji ou <svg>) */
.missing-icon{
  display: inline-grid;
  place-items: center;
  width: 1.25rem;
  height: 1.25rem;
  font-size: 1.05rem;     /* se usar emoji */
  filter: drop-shadow(0 1px 0 rgba(0,0,0,.35));
}

/* Badge (contador) */
.missing-badge{
  position: absolute;
  top: -6px;
  right: -6px;

  min-width: 20px;
  height: 20px;
  padding: 0 .35rem;

  background: linear-gradient(180deg,#60a5fa,#2563eb); /* azul vivo */
  color: #fff;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.35);
  font-size: .72rem;
  font-weight: 700;
  display: grid;
  place-items: center;

  box-shadow: 0 6px 14px rgba(37, 99, 235,.35), inset 0 1px 0 rgba(255,255,255,.5);
}

.hidden{ display:none !important; }

/* Pulso sutil quando há itens faltando (badge visível) */
.missing-btn .missing-badge:not(.hidden){
  animation: missingPulse 2s ease-in-out infinite;
}

@keyframes missingPulse{
  0%, 100% { transform: scale(1);    filter: brightness(1); }
  50%      { transform: scale(1.06); filter: brightness(1.06); }
}

/* Versão compacta se o header for apertado */
@media (max-width: 480px){
  .missing-btn{ padding: .55rem .75rem; border-radius: 12px; }
  .missing-icon{ width: 1.1rem; height: 1.1rem; font-size: .95rem; }
  .missing-badge{ min-width: 18px; height: 18px; font-size: .68rem; }
}

/* Deixa o botão igual aos chips padrão */
.chip {
  background: #0f172a;
  border: 1px solid #334155;
  color: #e2e8f0;
  padding: 6px 14px;
  border-radius: 8px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  transition: 0.2s;
}

.chip:hover {
  background: #1e293b;
}

/* Badge (numerinho) pequeno */
.badge-mini {
  background: #e11d48;
  color: white;
  padding: 2px 6px;
  font-size: 11px;
  line-height: 1;
  border-radius: 6px;
}

